# Task 20251028-02: TextPreprocessor Robustness Fix
Linked Spec: SPEC-TEXT-PREP-001
Goal:
Prevent double-indentation output and surface clipboard/cleaning failures to the user with actionable feedback.

Steps:
- Extend spec ACs to cover `order == "C"` path and error reporting expectations.
- RED: add tests covering `"C"` command flow and simulated clipboard exception to assert logging + graceful recovery.
- GREEN: update `TextPreprocessor` implementation to avoid extra indentation, centralize exception handling with warning logs, and ensure file writes stay idempotent.
- Refactor: tidy repeated input prompts if needed while keeping behaviour unchanged.
- Update tracing comments and ensure README/usage note reflects improved prompts if behaviour changes.

DoD Checklist:
- [x] Spec updated with new ACs and tracing references.
- [x] New failing tests implemented for `order == "C"` and clipboard failure cases.
- [x] Implementation change passes all tests and maintains coverage â‰¥ prior 91%.
- [x] Logging verified via tests or capturing logs to assert warnings.
- [x] README adjustments (if prompts change) completed (not required; prompts unchanged).
